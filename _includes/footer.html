<!--{% include base_path %}

{% if site.author.github or site.author.bitbucket or site.atom_feed.hide != true %}
<div class="page__footer-follow">
  <ul class="social-icons">
    {% if site.data.ui-text[site.locale].follow_label %}
      <li><strong>{{ site.data.ui-text[site.locale].follow_label }}</strong></li>
    {% endif %}
    {% if site.author.github %}
      <li><a href="http://github.com/{{ site.author.github }}"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a></li>
    {% endif %}
    {% if site.author.bitbucket %}
      <li><a href="http://bitbucket.org/{{ site.author.bitbucket }}"><i class="fab fa-bitbucket" aria-hidden="true"></i> Bitbucket</a></li>
    {% endif %}
    {% if site.atom_feed.hide != true %}
    <li><a href="{% if site.atom_feed.path %}{{ site.atom_feed.path }}{% else %}{{ base_path }}/feed.xml{% endif %}"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> {{ site.data.ui-text[site.locale].feed_label | default: "Feed" }}</a></li>
    {% endif %}
  </ul>
</div>
{% endif %}-->

<!--<div class="page__footer-copyright">
  &copy; {{ site.time | date: '%Y' }} {{ site.name | default: site.title }}, {{ site.data.ui-text[site.locale].powered_by | default: "Powered by" }} <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.<br />
  Site last updated {{ "now" | date: '%Y-%m-%d' %}}
</div>-->

<div class="page__footer-copyright">
  &copy; {{ site.time | date: '%Y' }} Ziqi Wang.<br />
  Site last updated {{ "now" | date: '%Y-%m-%d' }}
</div>


<!-- Visitors counter -->
<p class="text-center text-muted small mt-3">
  ğŸ‘ï¸ Site visits: <span id="site_visits">Loading...</span>
  &nbsp;&nbsp;|&nbsp;&nbsp;
  ğŸ“„ This page: <span id="page_visits">Loading...</span>
</p>

<script>
(function () {
  function show(id, val){ var el=document.getElementById(id); if(el) el.textContent = Number(val||0).toLocaleString(); }

  // å‘½åç©ºé—´=åŸŸåï¼ˆè‡ªåŠ¨è¯†åˆ«ä½ çš„ ziqiwang0312.github.io æˆ–è‡ªå®šä¹‰åŸŸï¼‰
  var ns  = encodeURIComponent(window.location.hostname);
  // å½“å‰è·¯å¾„åš keyï¼ˆå»æ‰ç‰¹æ®Šå­—ç¬¦ï¼Œä¿è¯å¯ç”¨ï¼‰
  var pageKey = 'page_' + encodeURIComponent(location.pathname.replace(/[^a-zA-Z0-9_-]/g,'_'));
  var siteKey = 'site_total';

  var API = 'https://api.countapi.xyz';
  var noCache = { cache: 'no-store' };

  // é€šç”¨ï¼šå…ˆå°è¯• update (+1)ï¼Œå¤±è´¥åˆ™é™çº§ä¸º getï¼ˆæœ‰äº›æµè§ˆå™¨æˆ–æ’ä»¶ä¼šæ‹¦æˆª updateï¼‰
  function bumpAndGet(key, targetId){
    return fetch(`${API}/update/${ns}/${key}/?amount=1`, noCache)
      .then(r => { if(!r.ok) throw new Error(r.status); return r.json(); })
      .then(d => show(targetId, d.value))
      .catch(() => fetch(`${API}/get/${ns}/${key}`, noCache)
        .then(r => r.json())
        .then(d => show(targetId, d.value))
        .catch(() => show(targetId, 'N/A')));
  }

  bumpAndGet(siteKey, 'site_visits');
  bumpAndGet(pageKey, 'page_visits');
})();
</script>

